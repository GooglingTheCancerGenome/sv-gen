import random

shell.executable("/bin/bash")
configfile: "analysis.yaml"

__author__ = ['Luca Santuari', 'Arnold Kuzniar']
__version__ = '0.1.0'
__license__ = 'Apache License, Version 2.0'


# REFERENCE = config['input']
# NORMALFASTA = config['output']['diploid']
# SVFASTA = config['output']['diploid_sv']
# SEED = random.randint(1, 10**3)

localrules: all

rule all:
    input:
        #os.path.splitext(config['input']['region'])[0] + ".fasta"
        #[expand("{prefix}.{ext}", prefix=config['input']['fasta'], ext=['bwt', 'amb', 'ann', 'pac', 'sa']),
        #config['output'].values(),
        [expand("{prefix}_{paired}.fq",
        prefix=[os.path.join(f, os.path.splitext(config['input']['region'])[0]) for f in config['output'].values()],
        paired=[1,2]),
        expand("{prefix}.sam",
        prefix=[os.path.join(f, os.path.splitext(config['input']['region'])[0]) for f in config['output'].values()])]

# include rules
include: "rules/sim_genomes.smk"
include: "rules/sim_reads.smk"
include: "rules/map_reads.smk"
